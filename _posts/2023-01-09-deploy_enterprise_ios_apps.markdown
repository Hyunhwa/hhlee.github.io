---
layout: post
title: "[iOS] 엔터프라이즈앱 배포하기"
date: 2023-02-06
tags: [iOS, Swift, SPM]
comments: true
categories: Swift
---

엔터프라이즈 앱을 안정적으로 서비스하기 위해서는 두 가지 만료일을 고려해야합니다.

- 배포인증서 만료일 (유효기간 - 생성일로부터 3년)

- 프로비저닝 파일 만료일 (유효기간 - 생성일부터 1년)

 

두 가지 중 하나라도 __만료되면 앱이 실행되지 않습니다__. 

이때 만료일은 __앱 배포시 프로젝트에 설정되어있던 프로비저닝 파일/배포인증서의 만료일__입니다.

따라서 유효기간이 짧은 프로비저닝 파일이 만료되는 날짜를 기준으로 __매년 1회 전체 배포가 필요__합니다.


## 배포절차

1. 프로비저닝 파일 갱신

관리자 페이지에서 배포할 앱의 프로비저닝 파일을 선택합니다.
최근 생성된 배포인증서를 선택하여 저장합니다. (저장 시 만료일 자동 갱신됨)

2. 배포 진행 
Xcode > Settings.. > Acctounts > Download Maunal Profiles 클릭 후 배포합니다.


3. 배포인증서 갱신

현재 배포 인증서는 동시에 두 개의 인증서를 활성화할 수 있습니다. 두 번째 인증서는 첫 번째 인증서가 만료되기 전에 앱을 업데이트할 수 있는 중복 기간을 제공하기 위한 것입니다. 

전체 배포 기간(2달 정도) 마지막 날 오래된 배포인증서를 Revoke하고 새로 생성합니다. 
(배포인증서의 만료일을 추가로 모니터링 하지 않고 갱신하기 위한 절차)

**!! 두 개의 인증서를 동시에 삭제하고 동시에 생성하지 않도록 주의합니다.**

4. 배포인증서 공유

배포인증서는 생성한 사람의 PC에 최초 1회만 다운로드 가능합니다.
따라서 .p12 파일을 타인과 배포인증서의 공유가 필요한 경우 PC에서 내보내기를 통해 공유하기 해야합니다.
아래와 같은 방법으로 내보내기가 가능합니다. 
